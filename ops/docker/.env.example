# ==========================================
# EasyCloudPan 环境配置模板
# ==========================================
# 使用说明：
# 1. 复制此文件为 .env (在 ops/docker/ 目录下)
# 2. 根据您的实际环境修改配置值
# 3. 注意：生产环境请务必修改所有的密码和密钥！
# ==========================================

# ------------------------------------------
# 基础服务配置 (数据库, Redis, MinIO)
# ------------------------------------------
#这些变量会被 docker-compose.yml 和本地启动脚本(startup.bat/ps1) 使用，
#并自动映射到后端 application.properties 对应的 JDBC URL 等配置中。

# PostgreSQL 数据库配置
POSTGRES_DB=easypan
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

# Redis 密码 (注意：如果修改这里，docker-compose 中的 redis 启动命令也会使用此密码)
REDIS_PASSWORD=password123

# MinIO 对象存储配置 (用于文件存储)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadminpassword
# 默认创建的存储桶名称
MINIO_BUCKET=easypan

# ------------------------------------------
# 应用服务核心配置
# ------------------------------------------
# 后端服务端口
SERVER_PORT=7090

# 开发模式 (true/false)
# true: 跳过部分验证码校验，便于调试
# false: 生产环境必须设为 false
DEV_MODE=false

# 超级管理员邮箱 (逗号分隔)
ADMIN_EMAILS=admin@example.com

# 文件存储根目录 (必须以 / 结尾)
# Docker 环境: 映射容器内的 /data/easypan/
# 本地开发: 默认为项目下的 backend/file/ (脚本会自动处理)
PROJECT_FOLDER=/data/easypan/

# 日志级别 (debug, info, warn, error)
LOG_ROOT_LEVEL=info

# ------------------------------------------
# 安全与加密配置 (重要！)
# ------------------------------------------
# JWT 令牌签名密钥 (必须大于32个字符)
# 生产环境请务必生成一个新的随机字符串
JWT_SECRET=defaultSecretKeyRequires256BitsMinimumLengthForHS256AlgorithmIsHere

# 数据库中敏感字段加密的密钥 (Jasypt)
# 如果您启用了配置文件加密，此密码用于解密 application.properties 中的密文
JASYPT_ENCRYPTOR_PASSWORD=easypan_secure_key

# ------------------------------------------
# 邮件服务配置 (SMTP)
# ------------------------------------------
# 用于发送注册验证码、重置密码邮件
SPRING_MAIL_HOST=smtp.qq.com
SPRING_MAIL_PORT=465
SPRING_MAIL_USERNAME=your_email@qq.com
# 邮箱授权码 (不是登录密码)
# 获取方式 (以QQ邮箱为例): 设置 -> 账户 -> POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务 -> 生成授权码
SPRING_MAIL_PASSWORD=your_email_auth_code

# ------------------------------------------
# 第三方登录配置 (OAuth2) - 可选
# ------------------------------------------
# 提示：如果不需要对应的登录方式，留空即可。
# 回调地址 (Redirect URI) 必须与第三方平台配置的完全一致。

# 1. QQ 互联登录
# 申请地址: https://connect.qq.com/
# 配置位置: 应用管理 -> 查看 -> 基本信息
QQ_APP_ID=
QQ_APP_KEY=
# QQ 回调地址 (需要在QQ互联平台的回调地址中填写此URL)
QQ_URL_REDIRECT=http://localhost:8080/qqlogincallback

# 2. GitHub 登录
# 申请地址: https://github.com/settings/developers
# 配置位置: OAuth Apps -> New OAuth App
# Homepage URL: http://localhost:8080 (前端地址)
# Authorization callback URL: http://localhost:5173/oauth/callback/github (注意：这里需填写前端处理回调的地址)
OAUTH_GITHUB_CLIENT_ID=
OAUTH_GITHUB_CLIENT_SECRET=
# 前端回调处理地址，通常无需修改，除非更改了前端路由或端口
OAUTH_GITHUB_REDIRECT_URI=http://localhost:5173/oauth/callback/github

# 3. Gitee (码云) 登录
# 申请地址: https://gitee.com/oauth/applications
# 配置位置: 创建应用
# 应用主页: http://localhost:8080
# 回调地址: http://localhost:5173/oauth/callback/gitee
OAUTH_GITEE_CLIENT_ID=
OAUTH_GITEE_CLIENT_SECRET=
OAUTH_GITEE_REDIRECT_URI=http://localhost:5173/oauth/callback/gitee

# 4. Google 登录
# 申请地址: https://console.cloud.google.com/apis/credentials
# 配置位置: 创建凭据 -> OAuth 客户端 ID -> Web 应用
# 已获授权的重定向 URI: http://localhost:5173/oauth/callback/google
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_GOOGLE_REDIRECT_URI=http://localhost:5173/oauth/callback/google

# 5. Microsoft 登录
# 申请地址: https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# 配置位置: 应用注册 -> 新注册 -> 身份验证 -> 添加平台 -> Web
# 重定向 URI: http://localhost:5173/oauth/callback/microsoft
# Client Secret (客户端密码): 证书和密码 -> 新客户端密码
OAUTH_MICROSOFT_CLIENT_ID=
OAUTH_MICROSOFT_CLIENT_SECRET=
OAUTH_MICROSOFT_REDIRECT_URI=http://localhost:5173/oauth/callback/microsoft
