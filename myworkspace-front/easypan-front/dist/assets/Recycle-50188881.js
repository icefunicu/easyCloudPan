import{_ as M,a as V,r as k,e as h,f as o,h as u,i as a,j as m,w as p,n as C,l as y,F as I,m as f,t as T,A as j,q as E,s as w}from"./index-e609a1ae.js";const N=d=>(E("data-v-4b823b83"),d=d(),w(),d),A={class:"top"},H=N(()=>a("span",{class:"iconfont icon-revert"},null,-1)),U=N(()=>a("span",{class:"iconfont icon-del"},null,-1)),G={class:"file-list"},J=["onMouseenter","onMouseleave"],K=["title"],P={class:"op"},Q=["onClick"],W=["onClick"],X={key:0},Y={__name:"Recycle",emits:["reload"],setup(d,{emit:b}){const{proxy:l}=V(),n={loadDataList:"/recycle/loadRecycleList",delFile:"/recycle/delFile",recoverFile:"/recycle/recoverFile"},g=[{label:"文件名",prop:"fileName",scopedSlots:"fileName"},{label:"删除时间",prop:"recoveryTime",width:200},{label:"大小",prop:"fileSize",scopedSlots:"fileSize",width:200}],i=k({}),F={extHeight:20,selectType:"checkbox"},r=async()=>{let t={pageNo:i.value.pageNo,pageSize:i.value.pageSize},s=await l.Request({url:n.loadDataList,params:t});s&&(i.value=s.data)},c=k([]),x=t=>{c.value=[],t.forEach(s=>{c.value.push(s.fileId)})},R=t=>{i.value.list.forEach(s=>{s.showOp=!1}),t.showOp=!0},z=t=>{t.showOp=!1},O=t=>{l.Confirm(`你确定要还原【${t.fileName}】吗?`,async()=>{await l.Request({url:n.recoverFile,params:{fileIds:t.fileId}})&&r()})},q=()=>{l.Confirm("你确定要还原这些文件吗?",async()=>{await l.Request({url:n.recoverFile,params:{fileIds:c.value.join(",")}})&&r()})},B=t=>{l.Confirm(`你确定要删除【${t.fileName}】吗? 删除后无法恢复`,async()=>{await l.Request({url:n.delFile,params:{fileIds:t.fileId}})&&(r(),b("reload"))})},$=()=>{l.Confirm("你确定要删除这些文件吗? 删除后无法恢复",async()=>{await l.Request({url:n.delFile,params:{fileIds:c.value.join(",")}})&&(r(),b("reload"))})};return(t,s)=>{const S=h("el-button"),_=h("Icon"),D=h("Table");return o(),u("div",null,[a("div",A,[m(S,{type:"success",disabled:c.value.length==0,onClick:q},{default:p(()=>[H,C(" 还原")]),_:1},8,["disabled"]),m(S,{type:"danger",disabled:c.value.length==0,onClick:$},{default:p(()=>[U,C(" 批量删除")]),_:1},8,["disabled"])]),a("div",G,[m(D,{ref:"dataTableRef",columns:g,dataSource:i.value,fetch:r,initFetch:!0,options:F,onRowSelected:x},{fileName:p(({index:L,row:e})=>[a("div",{class:"file-item",onMouseenter:v=>R(e),onMouseleave:v=>z(e)},[(e.fileType==3||e.fileType==1)&&e.status!==0?(o(),y(_,{key:0,cover:e.fileCover},null,8,["cover"])):(o(),u(I,{key:1},[e.folderType==0?(o(),y(_,{key:0,fileType:e.fileType},null,8,["fileType"])):f("",!0),e.folderType==1?(o(),y(_,{key:1,fileType:0})):f("",!0)],64)),a("span",{class:"file-name",title:e.fileName},T(e.fileName),9,K),a("span",P,[e.showOp?(o(),u(I,{key:0},[a("span",{class:"iconfont icon-link",onClick:v=>O(e)},"还原",8,Q),a("span",{class:"iconfont icon-cancel",onClick:v=>B(e)},"删除",8,W)],64)):f("",!0)])],40,J)]),fileSize:p(({index:L,row:e})=>[e.fileSize?(o(),u("span",X,T(j(l).Utils.size2Str(e.fileSize)),1)):f("",!0)]),_:1},8,["dataSource"])])])}}},ee=M(Y,[["__scopeId","data-v-4b823b83"]]);export{ee as default};
